#!/usr/bin/env python3
import urllib.request
import time

print('–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞...')
for i in range(5):
    try:
        response = urllib.request.urlopen('http://localhost:3000/', timeout=3)
        print(f'‚úÖ –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç: {response.status}')

        # –ü–æ–ª—É—á–∞–µ–º HTML
        html = response.read().decode('utf-8', errors='ignore')

        # –ò—â–µ–º –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        if '–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç' in html:
            print('‚úÖ –ù–∞–π–¥–µ–Ω —Ç–µ–∫—Å—Ç "–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç"')
        else:
            print('‚ùå –ù–ï–¢ —Ç–µ–∫—Å—Ç–∞ "–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç"')

        if '–í–æ–π—Ç–∏' in html:
            print('‚úÖ –ù–∞–π–¥–µ–Ω —Ç–µ–∫—Å—Ç "–í–æ–π—Ç–∏"')
        else:
            print('‚ùå –ù–ï–¢ —Ç–µ–∫—Å—Ç–∞ "–í–æ–π—Ç–∏"')

        if 'üöÄ' in html:
            print('‚úÖ –ù–∞–π–¥–µ–Ω–∞ —Ä–∞–∫–µ—Ç–∞ üöÄ')
        else:
            print('‚ùå –ù–ï–¢ —Ä–∞–∫–µ—Ç—ã üöÄ')

        # –ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        print(f'–ü–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤: {html[:500]}...')
        break
    except Exception as e:
        print(f'‚ùå –ü–æ–ø—ã—Ç–∫–∞ {i+1}: {e}')
        time.sleep(2)
else:
    print('üí• –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –ø–æ—Å–ª–µ 5 –ø–æ–ø—ã—Ç–æ–∫')
