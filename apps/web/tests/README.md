# Тесты для Nexus Sales

## Структура тестов

```
tests/
├── __mocks__/          # Моки для unit-тестов
├── api/                # API тесты
├── e2e/                # E2E тесты
│   ├── auth-flow.spec.ts      # Тесты аутентификации
│   ├── products.spec.ts       # Тесты управления продуктами
│   ├── funnels.spec.ts        # Тесты аналитики воронок
│   └── ...                    # Другие e2e тесты
├── utils/              # Утилиты и фикстуры для тестов
│   ├── fixtures.ts     # Тестовые фикстуры
│   └── test-utils.ts   # Вспомогательные функции
└── smoke.spec.ts       # Smoke тесты
```

## Запуск тестов

### E2E тесты (Playwright)

```bash
# Запуск всех E2E тестов
npm run test:e2e

# Запуск E2E тестов в режиме headed
npm run test:e2e:headed

# Запуск E2E тестов с UI
npm run test:e2e:ui

# Отладка E2E тестов
npm run test:e2e:debug
```

### Unit тесты (Jest)

```bash
# Запуск всех unit тестов
npm test

# Запуск тестов в watch режиме
npm run test:watch

# Проверка покрытия кода тестами
npm run test:coverage
```

## Типы тестов

### E2E тесты

- `auth-flow.spec.ts` - Проверяет сценарии регистрации, входа и выхода пользователя
- `products.spec.ts` - Проверяет создание, редактирование и удаление продуктов
- `funnels.spec.ts` - Проверяет аналитику продаж и воронки заказов

### Фикстуры и утилиты

- `fixtures.ts` - Предоставляет тестовые фикстуры для E2E тестов
- `test-utils.ts` - Содержит вспомогательные функции для тестирования

## Запуск сидирования данных

Для заполнения базы данных тестовыми данными:

```bash
# Заполнение базы данных тестовыми данными (10 пользователей, 20 продуктов, 50 заказов)
npm run seed

# Заполнение базы данных минимальными данными для демонстрации
npm run seed:production
```

## Требования к тестам

- Все новые функции должны быть покрыты E2E тестами
- Тесты должны использовать реальные сценарии использования
- Тесты должны быть независимыми и воспроизводимыми